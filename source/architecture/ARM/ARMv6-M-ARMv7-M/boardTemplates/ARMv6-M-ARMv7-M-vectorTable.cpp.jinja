{% macro handlerComment(name, exceptionNumber) -%}
{{ name }}, address {{ '{:#x}'.format(exceptionNumber * 4) }}, exception number {{ exceptionNumber }}, IRQ number {{ exceptionNumber - 16 }}
{%- endmacro %}
/**
 * \file
 * \brief {{ board }} ({{ dictionary['chip']['compatible'][0] }} chip) vector table and default weak handlers
 *
 * \author Copyright (C) 2014-2018 Kamil Szczygiel http://www.distortec.com http://www.freddiechopin.info
 *
 * \par License
 * This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
 * distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * \warning
 * Automatically generated file - do not edit!
 */

extern "C"
{

/*---------------------------------------------------------------------------------------------------------------------+
| default weak handlers
+---------------------------------------------------------------------------------------------------------------------*/
{% for exceptionNumber, item in enumerate(dictionary['NVIC']['core-vectors'][1:], 2) if item %}

// {{ handlerComment(item['name'], exceptionNumber) }}
__attribute__ ((weak)) void {{ item['name'] }}_Handler()
{
	while (1);
}
{% endfor %}
{% for exceptionNumber, item in enumerate(dictionary['NVIC']['chip-vectors'],
		len(dictionary['NVIC']['core-vectors']) + 1) if item %}

// {{ handlerComment(item['name'], exceptionNumber) }}
__attribute__ ((weak)) void {{ item['name'] }}_IRQHandler()
{
	while (1);
}
{% endfor %}

/*---------------------------------------------------------------------------------------------------------------------+
| global symbols' declarations
+---------------------------------------------------------------------------------------------------------------------*/

extern const char __main_stack_end[];		// main stack end - imported from linker script

void Reset_Handler();		// import the address of Reset_Handler()

}	// extern "C"

namespace
{

/*---------------------------------------------------------------------------------------------------------------------+
| local types
+---------------------------------------------------------------------------------------------------------------------*/

/// single exception vector - pointer to function with no arguments and no return value
using ExceptionVector = void(*)();

}	// namespace

/*---------------------------------------------------------------------------------------------------------------------+
| global variables
+---------------------------------------------------------------------------------------------------------------------*/

/// vector table
extern "C" const ExceptionVector vectorTable[] __attribute__ ((section(".vectorTable"), used))
{
		reinterpret_cast<ExceptionVector>(__main_stack_end),	// 0x0: Main stack end address
{% for exceptionNumber, item in enumerate(dictionary['NVIC']['core-vectors'], 1) %}
{% if item %}
		{{ item['name'] }}_Handler,		// {{ handlerComment(item['name'], exceptionNumber) }}
{% else %}
		nullptr,		// {{ handlerComment('Reserved', exceptionNumber) }}
{% endif %}
{% endfor %}
{% for exceptionNumber, item in enumerate(dictionary['NVIC']['chip-vectors'],
		len(dictionary['NVIC']['core-vectors']) + 1) %}
{% if item %}
		{{ item['name'] }}_IRQHandler,		// {{ handlerComment(item['name'], exceptionNumber) }}
{% else %}
		nullptr,		// {{ handlerComment('Reserved', exceptionNumber) }}
{% endif %}
{% endfor %}
};
