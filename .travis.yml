#
# file: .travis.yml
#
# author: Copyright (C) 2015 Kamil Szczygiel http://www.distortec.com http://www.freddiechopin.info
#
# This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
# distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
#
# date: 2015-12-08
#

# use container-based infrastructure
sudo: false

# use minimal environment
language: generic

# bleeding-edge-toolchain
install:
    - wget http://www.freddiechopin.info/en/download/category/11-bleeding-edge-toolchain?download=135%3Ableeding-edge-toolchain-151208-64-bit-linux -O gcc-arm-none-eabi-5_3-151208-linux-x64.tar.xz
    - tar -xvf gcc-arm-none-eabi-5_3-151208-linux-x64.tar.xz
    - export PATH=$PWD/gcc-arm-none-eabi-5_3-151208/bin:$PATH

# configurations that will be tested
env:
    - CONFIG_PATH=STM32F4DISCOVERY/test

# configure and build selected configurations
script:
    - make configure
    - make -j`nproc` VERBOSE=1
